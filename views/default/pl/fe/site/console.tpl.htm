<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<base href='/'>
		<link href="/static/css/bootstrap.min.css" rel="stylesheet">
		<link href="/static/css/tms.css" rel="stylesheet">
		<link href="/views/default/pl/fe/site/console.css" rel="stylesheet">
		<title>我的站点</title>
	</head>
	<body ng-app='app' ng-controller='ctrlSite'>
		<notice-box err='errmsg' info='infomsg' delay='1000'></notice-box>
		<nav class='navbar navbar-inverse'>
			<ul class='nav navbar-nav site'>
				<li class='active'>
					<a href='/rest/pl/fe/site/console?site={{siteId}}'>工作台</a>
				</li>
				<li>
					<a href='/rest/pl/fe/site/user?site={{siteId}}' target='_self'>用户</a>
				</li>
				<li>
					<a href='/rest/pl/fe/site/setting?site={{siteId}}' target='_self'>站点设置</a>
				</li>
			</ul>
			<ul class='nav navbar-nav navbar-right' style='margin-right:0'>
				<li><a href='/page/pl/fe/user/settings' target='_self'>设置</a></li>
				<li><a href='/rest/pl/fe/user/logout' target='_self'>退出</a></li>
			</ul>
		</nav>
		<div class='container' ng-controller='ctrlConsole'>
			<div id='viewRecent'>
				<div class='matters'>
					<div class='col-md-6' ng-repeat='m in matters'>
						<div class='thumbnail' ng-click="open(m)">
							<h4 class='title' ng-bind='m.matter_title'></h4>
							<p class='summary' ng-bind='m.matter_summary'></p>
							<div class='attr'>
								<div class='operator_name' ng-bind='m.operator_name'></div>
								<div class='modify_at' title='修改时间' ng-bind="m.operate_at*1000|date:'yy-MM-dd'"></div>
							</div>
						</div>
					</div>
				</div>
				<nav class="navbar navbar-default">
					<div class="navbar-form">
						<button class="btn btn-success" ng-click="addArticle()">＋图文</button>
						<button class="btn btn-success" ng-click="addNews()">＋多图文</button>
						<button class="btn btn-success" ng-click="addChannel()">＋频道</button>
						<button class="btn btn-success" ng-click="addEnrollByTemplate()">＋登记</button>
						<button class="btn btn-success" ng-click="addGroup()">＋分组</button>
						<button class="btn btn-success" ng-click="addLottery()">＋抽奖</button>
						<button class="btn btn-success" ng-click="addContribute()">＋投稿</button>
						<button class="btn btn-success" ng-click="addTask()">＋项目</button>
						<button class="btn btn-success" ng-click="addCustom()">＋定制页</button>
					</div>
				</nav>
			</div>
			<div id='viewUsers'>
				用户动态，开发中
			</div>
		</div>
		<script type='text/ng-template' id='templatePicker.html'>
	        <div class="modal-header">
	            <button class="close" ng-click="cancel()">×</button>
	            <h5 class="modal-title">选择模板</h5>
	        </div>
	        <div class="modal-body template">
	            <div class='options'>
	                <div class='form-group'>
	                    <label>场景</label>
	                    <select class='form-control' ng-model='data.scenario' ng-options='s as s.title for s in templates' ng-change='chooseScenario()'></select>
	                </div>
	                <div class='form-group'>
	                    <label>模板</label>
	                    <select class='form-control' ng-model='data.template' ng-options='t.title for t in data.scenario.templates' ng-change='chooseTemplate()'></select>
	                </div>
	                <div class='form-group'>
	                    <button class="btn" ng-class="{'btn-default':!selected.template,'btn-success':data.template}" ng-click="ok()" ng-disabled='!data.template'>创建活动</button>
	                </div>
	                <div class='form-group'>
	                    <button class="btn btn-default" ng-click="blank()">创建空活动</button>
	                </div>
	            </div>
	            <div class='pages'>
	                <div class='form-group'>
	                    <select id='selectedPage' class='form-control' ng-model='data.selectedPage' ng-options='p.title for p in pages' ng-change='choosePage()'></select>
	                </div>
	                <div class='form-group'>
	                    <iframe id='simulator' src=""></iframe>
	                </div>
	            </div>
	            <div class='schema' ng-if="data.scenario.name==='voting'">
	                <div class='form-group'>
	                    <button class='btn btn-default' ng-click='choosePage()'>重新生成页面</button>
	                </div>
	                <div class='form-group'>
	                    <textarea id='schemaData' ng-model="data.simpleSchema"></textarea>
	                </div>
	            </div>
	        </div>
	    </script>
		<script src="/static/js/angular.min.js"></script>
		<script src="/static/js/angular-route.min.js"></script>
		<script src="/static/js/angular-sanitize.min.js"></script>
		<script src="/static/js/ui-bootstrap.min.js"></script>
		<script src="/static/js/ui-bootstrap-tpls.min.js"></script>
		<script src="/static/js/ui-tms.js"></script>
		<script src="/static/js/matters-xxt.js"></script>
		<script src="/views/default/pl/fe/site/console.js"></script>
	</body>
</html>